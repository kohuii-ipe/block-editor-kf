<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>タグカスタマイズ変換エディタ (カスタムタグ対応)</title>
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<!-- 変換パターン設定エリア -->
		<h2>変換パターン設定</h2>

		<div id="patternSelectorContainer" class="pattern-selector">
			<!-- ラジオボタンはJSで動的に生成されます -->
		</div>

		<!-- パターン管理コントロール -->
		<div id="patternManagement">
			<button id="addPatternButton">➕ 新しいパターンを追加</button>
			<button id="renamePatternButton">✍️ パターン名を変更</button>
			<button id="deletePatternButton" disabled style="color: red">🗑️ パターンを削除</button>
		</div>

		<hr />

		<!-- 新しいタグボタン管理エリア -->
		<h2>タグボタン管理</h2>
		<div id="tagButtonManagement">
			<p style="font-size: 0.9em; margin-bottom: 10px">
				※選択中のパターンに紐づく<strong>タグボタン</strong>をカスタマイズします。
			</p>
			<button id="addNewTagButton">➕ 新しいタグボタンを追加</button>
			<div id="tagButtonList">
				<!-- 既存のタグボタンがJSでここに表示されます -->
			</div>
		</div>

		<hr />

		<!-- ショートカットキー管理エリア -->
		<h2>ショートカットキー管理</h2>
		<div id="shortcutManagement">
			<p style="font-size: 0.9em; margin-bottom: 10px">
				※テキスト選択時に使えるショートカットキーをカスタマイズします。
			</p>
			<button id="addNewShortcutButton">➕ 新しいショートカットを追加</button>
			<div id="shortcutList">
				<!-- ショートカット設定がJSでここに表示されます -->
			</div>
		</div>

		<hr />

		<!-- 入力エリア -->
		<h2>入力エリア</h2>
		<div id="container"></div>

		<!-- 挿入位置セレクタ -->
		<div id="insertionPointControls">
			<label for="insertionPointSelector">挿入位置を選択:</label>
			<select id="insertionPointSelector">
				<!-- オプションはJavaScriptで動的に生成されます -->
			</select>
			<p style="font-size: 0.8em; color: #666; margin-top: 5px">
				※選択したエリアの<strong>直後</strong>に新しいタグが挿入されます。「<strong>リストの先頭</strong>」を選択すると、一番上に追加されます。
			</p>
		</div>

		<!-- タグ追加ボタン群 (JSで動的に再生成されます) -->
		<div id="tagButtonsContainer" class="tag-buttons">
			<!-- 動的なボタンがここに追加されます -->
		</div>
		<p style="font-size: 0.9em; margin-top: 10px">
			※ショートカットキーは上の「ショートカットキー管理」セクションでカスタマイズできます。
		</p>

		<hr />

		<!-- 一括変換ボタン -->
		<h2>HTMLコード出力</h2>
		<button id="convertToAllButton">すべてを一括変換して追記</button>

		<div id="outputContainer">
			<h3>変換されたHTMLコード</h3>
			<pre><code id="htmlCodeOutput"></code></pre>

			<!-- コピーボタン -->
			<button id="copyOutputButton">コードをコピー</button>
			<button id="clearOutputButton">結果をクリア</button>
		</div>

		<!-- タグ追加/編集モーダル -->
		<div id="tagModal" class="modal">
			<div class="modal-content">
				<span class="close">&times;</span>
				<h3 id="modalTitle">新しいタグボタンの追加</h3>
				<form id="tagModalForm">
					<input type="hidden" id="tagIdInput" />

					<label for="tagNameInput">ボタン名 (例: 大見出し, 外部リンク, 枠)</label>
					<input type="text" id="tagNameInput" required />

					<label for="tagTypeSelector">タグタイプ (動作モード)</label>
					<select id="tagTypeSelector">
						<option value="single">[TEXT]置換 (P, H, BOXなど)</option>
						<option value="list">[TEXT]置換 (UL, OLなど。各行がLIに)</option>
						<option value="link">[TEXT]と[URL]置換 (リンク系。2行入力)</option>
						<option value="p-list">[TEXT_P]と[TEXT_LIST]置換 (P+UL/OL系。複数行入力)</option>
						<option value="link-list">
							[TEXT]と[URL]で繰り返し (複数リンクのリスト。交互に入力)
						</option>
					</select>
					<p style="font-size: 0.8em; color: #666; margin-top: -10px">
						※入力エリアの動作（複数行の扱い、URLの取得など）を決定します。
					</p>

					<label for="tagTemplateInput">雛形 (テンプレート)</label>
					<textarea id="tagTemplateInput" rows="3" placeholder='例: &lt;p class="custom"&gt;[TEXT]&lt;/p&gt;'></textarea>
					<p style="font-size: 0.8em; color: #666; margin-top: -10px">
						※タグタイプに合わせて、[TEXT], [URL], [TEXT_P], [TEXT_LIST], [LINK_LIST] を使用できます。
					</p>

					<div id="linkItemTemplateSection" style="display: none">
						<label for="linkItemTemplateInput">リンク項目の雛形 (link-list用)</label>
						<textarea id="linkItemTemplateInput" rows="2" placeholder='例: &lt;li class="rtoc-item"&gt;&lt;a href="[URL]"&gt;[TEXT]&lt;/a&gt;&lt;/li&gt;'></textarea>
						<p style="font-size: 0.8em; color: #666; margin-top: -10px">
							※繰り返される各リンク項目の形式を [URL] と [TEXT] を使って定義します。
						</p>
					</div>

					<button type="submit">保存</button>
				</form>
			</div>
		</div>

		<!-- ショートカット追加モーダル -->
		<div id="shortcutModal" class="modal">
			<div class="modal-content">
				<span class="close" id="closeShortcutModal">&times;</span>
				<h3>新しいショートカットキーの追加</h3>
				<form id="shortcutModalForm">
					<label for="shortcutKeyInput">キー (A-Z の1文字)</label>
					<input type="text" id="shortcutKeyInput" maxlength="1" required placeholder="例: G, I, Pなど" />
					<p style="font-size: 0.85em; color: #666">
						※Ctrl/Cmd と組み合わせて使用します。A-Zの英字1文字を入力してください。
					</p>

					<label for="shortcutTagInput">タグ名</label>
					<input type="text" id="shortcutTagInput" required placeholder="例: code, span, div" />
					<p style="font-size: 0.85em; color: #666">
						※選択テキストを囲むHTMLタグ名を入力してください。
					</p>

					<button type="submit">追加</button>
				</form>
			</div>
		</div>
	</body>
	<script src="script.js"></script>
</html>
