<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>block-editor-kf</title>
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<!-- タイトルバナー -->
		<header class="title-banner">
			<h1>block-editor-kf</h1>
		</header>

		<!-- 変換パターン設定エリア -->
		<h2>変換パターン設定</h2>

		<div id="patternSelectorContainer" class="pattern-selector">
			<!-- ラジオボタンはJSで動的に生成されます -->
		</div>

		<!-- パターン管理コントロール -->
		<div id="patternManagement">
			<button id="addPatternButton">➕ 新しいパターンを追加</button>
			<button id="renamePatternButton">✍️ パターン名を変更</button>
			<button id="deletePatternButton" disabled style="color: red">🗑️ パターンを削除</button>
		</div>

		<hr />

		<!-- 新しいタグボタン管理エリア -->
		<h2>タグボタン管理</h2>
		<div id="tagButtonManagement">
			<p style="font-size: 0.9em; margin-bottom: 10px">
				※選択中のパターンに紐づく<strong>タグボタン</strong>をカスタマイズします。
			</p>
			<button id="addNewTagButton">➕ 新しいタグボタンを追加</button>
			<div id="tagButtonList">
				<!-- 既存のタグボタンがJSでここに表示されます -->
			</div>
		</div>

		<hr />

		<!-- 書式マッピング管理エリア -->
		<h2>Word貼り付け書式マッピング</h2>
		<div id="formattingManagement">
			<p style="font-size: 0.9em; margin-bottom: 10px">
				※Wordからコピー＆ペーストした際の書式変換ルールをカスタマイズします。<br>
				※[TEXT]を含むテンプレート形式で入力してください（例: &lt;strong&gt;[TEXT]&lt;/strong&gt;）
			</p>
			<div id="formattingList">
				<!-- 書式マッピング設定がJSでここに表示されます -->
			</div>
		</div>

		<hr />

		<!-- 入力エリア -->
		<h2>入力エリア</h2>
		<div id="container"></div>

		<!-- 挿入位置セレクタ -->
		<div id="insertionPointControls">
			<label for="insertionPointSelector">挿入位置を選択:</label>
			<select id="insertionPointSelector">
				<!-- オプションはJavaScriptで動的に生成されます -->
			</select>
			<p style="font-size: 0.8em; color: #666; margin-top: 5px">
				※選択したエリアの<strong>直後</strong>に新しいタグが挿入されます。「<strong>リストの先頭</strong>」を選択すると、一番上に追加されます。
			</p>
		</div>

		<!-- タグ追加ボタン群 (JSで動的に再生成されます) -->
		<div id="tagButtonsContainer" class="tag-buttons">
			<!-- 動的なボタンがここに追加されます -->
		</div>
		<p style="font-size: 0.9em; margin-top: 10px">
			※ショートカットキーは上の「ショートカットキー管理」セクションでカスタマイズできます。
		</p>

		<hr />

		<!-- 一括変換ボタン -->
		<button id="convertToAllButton">すべてを一括変換して追記</button>
		<button id="clearOutputButton">結果をクリア</button>
		<button id="copyOutputButton">コードをコピー</button>

		<div id="outputContainer">
			<h3>変換されたHTMLコード</h3>
			<pre><code id="htmlCodeOutput"></code></pre>
		</div>

		<!-- タグ追加/編集モーダル -->
		<div id="tagModal" class="modal">
			<div class="modal-content">
				<span class="close">&times;</span>
				<h3 id="modalTitle">新しいタグボタンの追加</h3>
				<form id="tagModalForm">
					<input type="hidden" id="tagIdInput" />

					<label for="tagNameInput">ボタン名 (例: 大見出し, 外部リンク, 枠)</label>
					<input type="text" id="tagNameInput" required />

					<label for="tagTypeSelector">タグタイプ (動作モード)</label>
					<select id="tagTypeSelector">
						<option value="single">[TEXT]置換 (P, H, BOXなど)</option>
						<option value="multi">[TEXT]置換 (各行が個別のタグに)</option>
						<option value="list">[TEXT]置換 (UL, OLなど。各行がLIに)</option>
						<option value="link">[TEXT]と[URL]置換 (リンク系。2行入力)</option>
						<option value="p-list">[TEXT_P]と[TEXT_LIST]置換 (P+UL/OL系。複数行入力)</option>
						<option value="link-list">
							[TEXT]と[URL]で繰り返し (複数リンクのリスト。交互に入力)
						</option>
					</select>
					<p style="font-size: 0.8em; color: #666; margin-top: -10px">
						※入力エリアの動作（複数行の扱い、URLの取得など）を決定します。
					</p>

					<label for="tagTemplateInput">雛形 (テンプレート)</label>
					<textarea id="tagTemplateInput" rows="8" placeholder='例: &lt;p class="custom"&gt;[TEXT]&lt;/p&gt;'></textarea>
					<p style="font-size: 0.8em; color: #666; margin-top: -10px">
						※タグタイプに合わせて、[TEXT], [URL], [TEXT_P], [TEXT_LIST], [LINK_LIST] を使用できます。
					</p>

					<div id="linkItemTemplateSection" style="display: none">
						<label for="linkItemTemplateInput">リンク項目の雛形 (link-list用)</label>
						<textarea id="linkItemTemplateInput" rows="4" placeholder='例: &lt;li class="rtoc-item"&gt;&lt;a href="[URL]"&gt;[TEXT]&lt;/a&gt;&lt;/li&gt;'></textarea>
						<p style="font-size: 0.8em; color: #666; margin-top: -10px">
							※繰り返される各リンク項目の形式を [URL] と [TEXT] を使って定義します。
						</p>
					</div>

					<button type="submit">保存</button>
				</form>
			</div>
		</div>

	</body>
	<script src="script.js"></script>
</html>
