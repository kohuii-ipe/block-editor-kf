# Block Editor KF - ユーザーマニュアル

## 目次

1. [概要](#概要)
2. [基本的な使い方](#基本的な使い方)
3. [パターン管理](#パターン管理)
4. [タグボタンの作成と編集](#タグボタンの作成と編集)
5. [モード別詳細説明](#モード別詳細説明)
6. [書式マッピング](#書式マッピング)
7. [データ共有](#データ共有)
8. [トラブルシューティング](#トラブルシューティング)

---

## 概要

Block Editor KFは、テキストを定型的なHTMLコードに変換するブラウザベースのエディタです。

### 主な機能

- カスタムテンプレート作成
- 複数のパターン管理
- 5つの変換モード
- 書式マッピング
- データ永続化
- エクスポート/インポート機能

---

## 基本的な使い方

### 1. 入力エリアの追加

1. タグボタンをクリック
2. 入力エリアが追加される
3. テキストを入力

### 2. HTML変換

- 個別変換: 各入力エリアの「変換」ボタン
- 一括変換: 「すべて変換して追記」ボタン

### 3. コピー

「コピー」ボタンでクリップボードにコピー

---

## パターン管理

パターンは、タグボタン、書式マッピング、入力エリアをまとめた設定グループです。

### 操作

- **作成**: 「新しいパターンを追加」ボタン
- **切り替え**: パターンセレクタから選択
- **名前変更**: 「パターン名変更」ボタン
- **削除**: 「パターン削除」ボタン

---

## タグボタンの作成と編集

### プレースホルダー

| プレースホルダー | 説明 |
|---------------|------|
| [TEXT] | テキスト |
| [URL] | URL |
| [TEXT_P_1] | 段落1 |
| [TEXT_LIST] | リスト |
| [LINK_LIST] | リンクリスト |
| [CODE] | コード |

---

## モード別詳細説明

### 1. マルチラインモード

各行を個別のタグに変換

**テンプレート例:**
```html
<p class="item">[TEXT]</p>
```

### 2. 段落+リストモード

段落とリストを組み合わせ

- 通常行: 段落
- `-` または `*` で始まる行: リスト項目

### 3. リンクモード

Markdown形式のリンクを変換

**入力形式:**
```
[リンクテキスト](URL)
```

### 4. 静的モード

固定HTMLブロックを挿入（入力不要）

### 5. コードモード

コードをそのまま出力

---

## 書式マッピング

入力エリアの書式を自動変換

- 太字 → `<strong>[TEXT]</strong>`
- マーカー → `<mark>[TEXT]</mark>`
- リンク → `<a href="URL">[TEXT]</a>`

---

## データ共有

### エクスポート

1. 「データをエクスポート」クリック
2. パターン選択
3. パスワード保護（オプション）
4. 実行

### インポート

1. 「データをインポート」クリック
2. ファイル選択
3. パスワード入力（必要な場合）
4. マージまたは置換を選択
5. 実行

---

## トラブルシューティング

### データが保存されない

- プライベートモードを使用していないか確認
- ストレージ容量を確認

### テンプレートエラー

- 必須プレースホルダーを確認
- HTMLタグのバランスを確認

---

## 技術仕様

- **保存先**: LocalStorage
- **最大サイズ**: 5MB
- **暗号化**: AES-GCM (パスワード保護時)

---

## モジュール構成

- config.js - 設定
- state.js - 状態管理
- dom.js - DOM操作
- utils.js - ユーティリティ
- validation.js - バリデーション
- storage.js - ストレージ
- legacy-functions.js - メインロジック
- main.js - 初期化

詳細は REFACTORING.md を参照

---

**Enjoy your Block Editor KF!** 🎉
